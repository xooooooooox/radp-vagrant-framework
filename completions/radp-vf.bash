# radp-vf bash completion
# Generated by radp-vagrant-framework

_radp_vf() {
    local cur prev words cword

    # Initialize completion variables
    if type _init_completion &>/dev/null; then
        _init_completion || return
    else
        COMPREPLY=()
        cur="${COMP_WORDS[COMP_CWORD]}"
        prev="${COMP_WORDS[COMP_CWORD-1]}"
        words=("${COMP_WORDS[@]}")
        cword=$COMP_CWORD
    fi

    local commands="init vg list dump-config generate validate info template completion version help"
    local global_opts="-c --config -e --env -v --verbose -h --help --version"

    # Handle command-specific completions
    case "${words[1]}" in
        init)
            local init_opts="-t --template --set"
            case "$cur" in
                -*)
                    COMPREPLY=($(compgen -W "$init_opts" -- "$cur"))
                    return
                    ;;
            esac
            case "$prev" in
                -t|--template)
                    # Template names would need dynamic completion
                    COMPREPLY=($(compgen -W "base single-node k8s-cluster" -- "$cur"))
                    return
                    ;;
            esac
            # Directory completion
            if type _filedir &>/dev/null; then
                _filedir -d
            else
                COMPREPLY=($(compgen -d -- "$cur"))
            fi
            return
            ;;
        vg)
            # Delegate to vagrant's native completion for consistent experience
            if type _vagrant &>/dev/null; then
                # Shift words to simulate vagrant being called directly
                local vagrant_words=("vagrant" "${words[@]:2}")
                local vagrant_cword=$((cword - 1))
                COMP_WORDS=("${vagrant_words[@]}")
                COMP_CWORD=$vagrant_cword
                COMP_LINE="${vagrant_words[*]}"
                COMP_POINT=${#COMP_LINE}
                _vagrant
            else
                # Fallback if vagrant completion not loaded
                local vagrant_cmds="up halt destroy status ssh provision reload suspend resume snapshot box plugin validate"
                COMPREPLY=($(compgen -W "$vagrant_cmds" -- "$cur"))
            fi
            return
            ;;
        list)
            local list_opts="-v --verbose --provisions --synced-folders --triggers"
            case "$cur" in
                -*)
                    COMPREPLY=($(compgen -W "$list_opts" -- "$cur"))
                    return
                    ;;
            esac
            # Filter argument (no completion)
            return
            ;;
        dump-config)
            local dump_opts="-f --format -o --output"
            case "$cur" in
                -*)
                    COMPREPLY=($(compgen -W "$dump_opts" -- "$cur"))
                    return
                    ;;
            esac
            case "$prev" in
                -f|--format)
                    COMPREPLY=($(compgen -W "json yaml" -- "$cur"))
                    return
                    ;;
                -o|--output)
                    if type _filedir &>/dev/null; then
                        _filedir
                    else
                        COMPREPLY=($(compgen -f -- "$cur"))
                    fi
                    return
                    ;;
            esac
            return
            ;;
        generate)
            # Output file completion
            if type _filedir &>/dev/null; then
                _filedir
            else
                COMPREPLY=($(compgen -f -- "$cur"))
            fi
            return
            ;;
        validate|info|version|help)
            # No arguments
            return
            ;;
        template)
            # Template subcommands
            case "${words[2]:-}" in
                list)
                    return
                    ;;
                show)
                    # Template names
                    COMPREPLY=($(compgen -W "base single-node k8s-cluster" -- "$cur"))
                    return
                    ;;
                "")
                    COMPREPLY=($(compgen -W "list show" -- "$cur"))
                    return
                    ;;
            esac
            return
            ;;
        completion)
            COMPREPLY=($(compgen -W "bash zsh" -- "$cur"))
            return
            ;;
    esac

    # Top-level completion (no command selected yet)
    case "$cur" in
        -*)
            COMPREPLY=($(compgen -W "$global_opts" -- "$cur"))
            ;;
        *)
            COMPREPLY=($(compgen -W "$commands" -- "$cur"))
            ;;
    esac
}

complete -F _radp_vf radp-vf
